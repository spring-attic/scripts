<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.cloud</groupId>
		<artifactId>spring-cloud-samples</artifactId>
		<version>Brixton.BUILD-SNAPSHOT</version>
	</parent>
	<artifactId>spring-cloud-samples-docs</artifactId>
	<packaging>pom</packaging>
	<name>Spring Cloud Samples Docs</name>
	<description>Spring Samples Docs</description>
	<properties>
		<!-- Comma separated list of whitelisted branches -->
		<docs.whitelisted.branches>1.0.x</docs.whitelisted.branches>
		<main.basedir>${basedir}/..</main.basedir>
		<docs.main>spring-cloud</docs.main>
	</properties>
	<profiles>
		<profile>
			<id>docs</id>
			<build>
				<plugins>
					<plugin>
	          <groupId>org.apache.maven.plugins</groupId>
	          <artifactId>maven-resources-plugin</artifactId>
	          <executions>
	            <execution>
	              <id>copy-asciidoc</id>
	              <phase>generate-resources</phase>
	              <goals>
	                <goal>copy-resources</goal>
	              </goals>
	              <configuration>
	                <resources>
	                  <resource>
	                    <directory>${main.basedir}/bus/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/commons/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/cli/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/cloudfoundry/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/cluster/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/config/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/consul/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/contract/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/netflix/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/security/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/stream/spring-cloud-stream-core-docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/sleuth/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                  <resource>
	                    <directory>${main.basedir}/contract/docs/src/main/asciidoc</directory>
	                    <includes>
	                      <include>images/**</include>
	                    </includes>
	                    <excludes>
	                      <exclude>*.sh</exclude>
	                    </excludes>
	                  </resource>
	                </resources>
	                <outputDirectory>target/generated-docs</outputDirectory>
	              </configuration>
	            </execution>
	          </executions>
	        </plugin>
					<plugin>
					  <groupId>org.asciidoctor</groupId>
					  <artifactId>asciidoctor-maven-plugin</artifactId>
					  <version>1.5.3</version>
					  <executions>
						<execution>
						  <id>generate-docs</id>
						  <phase>process-resources</phase>
						  <goals>
							<goal>process-asciidoc</goal>
						  </goals>
						  <configuration>
							<sourceDocumentName>spring-cloud.adoc</sourceDocumentName>
							<backend>html</backend>
							<doctype>book</doctype>
							<attributes>
								<docinfo>true</docinfo>
								<spring-cloud-version>${release.train.version}</spring-cloud-version>
								<allow-uri-read>true</allow-uri-read>
								<basedir>${main.basedir}</basedir>
							</attributes>
						  </configuration>
						</execution>
					  </executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-antrun-plugin</artifactId>
						<inherited>false</inherited>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>build-helper-maven-plugin</artifactId>
						<inherited>false</inherited>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
</project>
